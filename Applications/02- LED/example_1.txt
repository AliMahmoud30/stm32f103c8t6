/*
 * main.c
 *
 *  Created on:
 *      Author: Ali Morsy
 */

/*=============================================================================
 *              Section: Includes
 =============================================================================*/
/*! Lib */
#include "STD_TYPES.h"
#include "BIT_MATH.h"

/*! Modules  */
#include "../02-MCAL/01-RCC/RCC_interface.h"
#include "../02-MCAL/02-GPIO/DIO_interface.h"
#include "LED_interface.h"
/*=====================================================================================
 *              Section: Macro Declarations
 =====================================================================================*/

/*=====================================================================================
 *              Section: Macro Function Declarations
 =====================================================================================*/

/*=====================================================================================
 *              Section: variables Declarations
 =====================================================================================*/

pin_config_t pin_1 =
{
	.port 	  = GPIOA,
	.pin  	  = PIN1,
	.pin_mode = OUTPUT_SPEED_10MHZ_PP,
	.logic    = LOGIC_LOW
};

led_t Led_1 =
{
	.port_name = GPIOA,
	.pin       = PIN0,
	.led_status= LOGIC_LOW
};


led_t Led_2 =
{
	.port_name = GPIOB,
	.pin       = PIN8,
	.led_status= LOGIC_LOW
};

Std_ReturnType  status = OPERATION_SUCCESS;
int main(void)
{
	/*! Initialize the system clock */
	RCC_voidInitSysClock();

	/* Enable Peripheral 2 on APB2 bus (GPIOA) */
	RCC_voidEnablePeripheralClock(RCC_APB2, IOPAEN);
	/* Enable Peripheral 23 on APB2 bus (GPIOA) */
	RCC_voidEnablePeripheralClock(RCC_APB2, IOPBEN);
	RCC_voidEnablePeripheralClock(RCC_APB2, IOPCEN);

	status = led_Initialize(&Led_1);
	status = led_Initialize(&Led_2);
	status = led_turn_on(&Led_1);
	status = led_turn_on(&Led_2);

	status = led_turn_off(&Led_1);
	status = led_turn_off(&Led_2);
	while(1)
	{

		status = led_toggle(&Led_1);
		status = led_toggle(&Led_2);
		for(uint16_t i = 0; i< 500; i++)
		{
			for(uint16_t j = 0; j< 500; j++)
			{
				asm("NOP");
			}
		}
	}
	return 0;
}
